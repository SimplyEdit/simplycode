[{"transformer":"validateHtml","render-code":"function(data) {\n  this.simplyData = data;\n  var element = this;\n  let htmlData = \"<!doctype html><html lang='en'><head><title>Test</title></head><body>\" + data + \"</body></html>\";\n  if (typeof element.validateTimeout !== \"undefined\") {\n    window.clearTimeout(element.validateTimeout);\n  }\n  element.validateTimeout = window.setTimeout(function() {\n    fetch(\"https://validator.w3.org/nu/?out=json\", {\n      mode : 'cors',\n      headers: {\n        \"Content-type\" : \"text/html; charset=utf-8\"\n      },\n      method: \"POST\",\n      body: htmlData\n    })\n      .then(function(result) {\n      return result.json();\n    })\n      .then(function(validateResult) {\n      element.dataBinding.config.data.validateResult = validateResult;\n      if(validateResult.messages.length) {\n        element.className = \"sb-html-invalid\";\n        element.innerHTML = \"HTML validation failed:\";\n      } else {\n        element.innerHTML = \"HTML validated!\";\n        element.className = \"sb-html-valid\";\n      }\n    });\n  }, 1000);\n  element.dataBinding.config.data.validateResult = {};\n  return \"Validating...\";\n}","extract-code":"function(data) {\n  return this.simplyData;\n}","editor":"code"}]