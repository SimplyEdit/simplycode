[{"route":"#pages/:component","code":"function(params) {\n  editor.pageData.app = {};\n  simplyApp.actions.getAppData()\n    .then(function(appData) {\n    editor.pageData.app = appData;\n  })\n    .then(function() {\n    return simplyApp.actions.getPage(params.component);\n  })\n    .then(function(parts) {\n    var component = {\n      id : params.component\n    };\n\n    parts = parts.filter(function(part) {\n      if (part.id == \"meta\") {\n        component = JSON.parse(part.contents);\n        component.id = params.component;\n        return false;\n      }\n      return true;\n    });\n    if (typeof component.parts === \"undefined\") {\n      component.parts = {\n        pageTemplates : [],\n        pageCss : [],\n        commands : [],\n        actions : [],\n        dataApi : [],\n        routes : [],\n        transformers : [],\n        dataSources : [],\n        sorters : []\n      };\n    }\n    var count = {};\n    parts.forEach(function(part) {\n      component.parts[part.id] = JSON.parse(part.contents);\n      count[part.id] = component.parts[part.id].length;\n    });\n    editor.pageData.component = component;\n    editor.pageData.parts = parts;\n    editor.pageData.count = count;\n    editor.pageData.page = \"Edit page\";\n  })\n    .then(function() {\n    setTimeout(function() { // FIXME: Wait for the CSS to be available;\n      simplyApp.commands.autoRunPreviews();\n    }, 1000);\n  });\n}","name":"page"}]