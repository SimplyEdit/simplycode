[{"action":"codeMirrorInit","code":"function() {\n  var textareas = document.querySelectorAll(\".sb-component[open] textarea[data-codemirror-mode]:not([style])\");\n  textareas.forEach(function(textarea) {\n    var mode = \"javascript\";\n    if (textarea.hasAttribute(\"data-codemirror-mode\")) {\n      mode = textarea.getAttribute(\"data-codemirror-mode\");\n    }\n    switch (mode) {\n      case \"css\":\n        // no change needed\n        break;\n      case \"html\":\n        mode = {\n          name: \"html\",\n          htmlMode : true,\n          matchClosing : true\n        }\n        break;\n      case \"htmlmixed\":\n        mode = {\n          name: \"htmlmixed\",\n          tags: {\n            style: [[null, null, \"css\"]],\n            script: [[null, null, \"javascript\"]]\n          }\n        };\n        break;\n      case \"javascript\":\n        // no change needed\n        break;\n      case \"json\":\n        mode = {\n          name : \"javascript\",\n          json : true\n        };\n        break;\n      default:\n        mode = \"javascript\";\n        break;\n    }\n    var cm = CodeMirror.fromTextArea(textarea, {\n      lineNumbers: true,\n      theme: \"base16-dark\",\n      mode: mode\n    });\n    cm.on(\"change\", function(event) {\n      cm.getTextArea().dataBinding.set(cm.getValue());\n    });\n  });\n}"}]